---
layout: post
title: "C语言生成随机数的小实验"
description: ""
category: C 
tags: [rand, C]
---
{% include JB/setup %}
C语言的随机函数 `rand()`， 理论上会在\[1, RAND_MAX\]之间生成均匀的随机数。但通常情况下，我们需要一个范围很小的随机数（例如随机化快排）。

多数人的做法（包括之前的我），直接采用 `rand() % N` 的做法。但根据 [C-faq](http://c-faq.com/lib/rand.html) 的介绍，这并不是一个好方法。相比之下，提供了另外两种方案：

1.  `(int)((double)rand() / ((double)RAND_MAX + 1) * N)`
2.  `rand() / (RAND_MAX / N + 1)`

为了验证哪种方式生成的随机数更均匀，我就打算做一个小小的测试。

实验步骤：

1. 使用`rand()` 生成 10^7 个随机数。
2. 对于每个随机数，分别带入3个函数中来生成随机数，并将结果输出到文件中。
3. 使用R语言，利用 `hist(x, breaks=range)` 来生成图像（感谢SHLUG上的朋友们）。
